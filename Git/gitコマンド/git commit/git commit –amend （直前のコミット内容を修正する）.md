# git commit --amend （直前のコミット内容を修正する）

- 以下のように、あるファイル（1.txt）を編集して、3回コミットしたとする。
- 3回目のコミット（直前のコミット）の内容を修正する。
- これは正確には以下のような動作になる。
  - 今回行うコミットの親コミットを2回前のコミットとする事で、
  - 直前のコミットを無かった事にする。コミットツリーから辿れなくする。コミットログから消える。

```bash
1
2
3
```

↓

```bash
1 A 
2
3
```

↓

```bash
1 A
2 B
3
```

この時のログは以下。

```bash
* f9c94cb (HEAD -> master) #3
* ecb621b #2
* 2dcddfd #1
```

## 手順

### ファイルを修正して、INDEXに追加する

```bash
vi 1.txt
 ----
 1 A
 2
 3 C
 ----
git add 1.txt
```

### 修正をコミットする

```bash
git commit --amend -m '#4'
```

### 結果を確認

```bash
git log 
* aa05186 (HEAD -> master) #4
* ecb621b #2
* 2dcddfd #1
```
