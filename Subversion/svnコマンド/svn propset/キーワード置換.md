# キーワード置換


## 手順
1. バージョン管理されてるファイルにキーワードを$Date$のような形式で埋め込む。

```bash
$ cat foo.txt

#!/bin/sh
# ------------------------------------------------------------------------------
# $Date$
# $Author$
# $HeadURL$
# ------------------------------------------------------------------------------

echo "hello, world"
```

2. svn:keywordsをpropsetする。

```bash
$ svn propset svn:keywords "Date Author HeadURL" foo.txt
属性 'svn:keywords' を 'foo.txt' に設定しました
```

3. コミットする。

```bash
$ svn commit -m 'set keywords' foo.txt
追加しています              foo.txt
```


4. キーワードが置換されている。

```bash
$ cat foo.txt
#!/bin/sh
# ------------------------------------------------------------------------------
# $Date: 2012-03-30 12:23:33 +0900 (金, 30  3月 2012) $
# $Author: taro $
# $HeadURL: file:///home/taro/svn_repos/svn/foo.txt $
# ------------------------------------------------------------------------------

echo "hello, world"
```

### キーワード置換の幅を揃える

```bash
$ cat foo.txt
#!/bin/sh
# ------------------------------------------------------------------------------
# $Date$ # comment1
# $Author$ # comment2
# $HeadURL$ # comment3
# ------------------------------------------------------------------------------

echo "hello, world"
```

キーワード行にコメント（↑の例では「# comment1」等）を書く場合、↑のようにすると不揃いでかっこ悪い。なので、↓のように、

```bash
$ cat foo.txt
#!/bin/sh
# ------------------------------------------------------------------------------
# $Date::                                               $ # comment1
# $Author::                                             $ # comment2
# $HeadURL::                                            $ # comment3
# ------------------------------------------------------------------------------

echo "hello, world"
```

キーワードの次に「::」を書いてスペースを連続して「$」までの幅を揃える。これをコミットすると、↓のように置換される。

```bash
$ cat foo.txt
#!/bin/sh
# ------------------------------------------------------------------------------
# $Date:: 2012-03-30 12:42:37 +0900 (金, 30  3月 2012#$ # comment1
# $Author:: taro                                      $ # comment2
# $HeadURL:: file:///home/taro/svn_reps/foo.txt       $ # comment3
# ------------------------------------------------------------------------------
```

## 参考
http://svnbook.red-bean.com/en/1.6/svn.advanced.props.special.keywords.html
