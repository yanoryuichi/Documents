# 仮想ハードディスクファイルの移動


## 目的
ある仮想マシンがマウントしてる仮想ハードディスク（.vhd）ファイルを別ドライブに移動する。

## 手順
### 準備

- 仮想マシンにログインして、シャットダウンする。
- Hyper-Vマネージャを起動して、当該仮想マシンを選択して右クリックから[設定]を選ぶ。
- [IDEコントローラー0]→[ハードドライブ]等の目的のハードディスクを選択して、[メディア]→[仮想ハードディスク（.vhd）ファイル]のパスを確認する。今回は以下の通りだった。

```clike
C:\Users\Public\Documents\Hyper-V\Virtual hard disks\win01.hvd
```

### VHDファイル移動

- Hyper-Vサーバにログインする。
- コマンドプロンプトでmoveコマンドを実行し仮想ハードディスクファイルを移動する。今回は以下のようにCドライブからEドライブへファイル移動をした。

```clike
E:
cd E:\Hyper-v\VHDs
move "C:\Users\Public\Documents\Hyper-V\Virtual hard disks\win01.vhd" .
```

### 仮想マシン設定変更

- Hyper-Vマネージャで当該仮想マシンを選択して右クリックから[設定]を選ぶ、
- [IDEコントローラー0]→[ハードドライブ]等の目的のハードディスクを選択して、[メディア]→[仮想ハードディスク（.vhd）ファイル]→[参照]をクリックする。
- E:\Hyper-v\VHDs\win01.vhdを選択する。
- OKをクリックして、仮想マシン設定のダイアログを閉じる。

### 仮想マシンの起動・動作確認

- Hyper-Vマネージャで当該仮想マシンを選択して右クリックから[起動]を選ぶ。
- 仮想マシンが起動したら、当該仮想マシンを選択して右クリックから[接続]を選び、仮想マシンの動作を確認する。
